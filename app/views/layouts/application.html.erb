<!-- app/views/layouts/application.html.erb -->
<!DOCTYPE html>
<html>
    <head>
      <title>EventHub</title>
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <%= csrf_meta_tags %>
      <%= csp_meta_tag %>

      <!-- Bootstrap CDN -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

      <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
      <%= javascript_importmap_tags %>
    </head>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <body>
    <!-- Navbar Le Wagon -->
    <div class="navbar navbar-expand-sm navbar-light navbar-lewagon">
      <div class="container-fluid">
        <%= link_to root_path, class: "navbar-brand" do %>
          <strong>EventHub</strong>
        <% end %>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <%= link_to "Ã‰vÃ©nements", root_path, class: "nav-link" %>
            </li>
            <% if user_signed_in? %>
              <li class="nav-item">
                <%= link_to "Nouvel Ã©vÃ©nement", new_event_path, class: "nav-link" %>
              </li>
            <% end %>
          </ul>

          <ul class="navbar-nav">
            <% if user_signed_in? %>
              <li class="nav-item dropdown">
                <div class="avatar dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown">
                  <%= current_user.email.first.upcase %>
                </div>
                <div class="dropdown-menu dropdown-menu-end">
                  <span class="dropdown-item-text">Bonjour <%= current_user.email %></span>
                  <div class="dropdown-divider"></div>
                  <%= button_to "DÃ©connexion", destroy_user_session_path,
                  method: :delete,
                  class: "dropdown-item",
                  data: { turbo_method: :delete } %>
                </div>
              </li>
            <% else %>
              <li class="nav-item">
                <%= link_to "Connexion", new_user_session_path, class: "nav-link" %>
              </li>
              <li class="nav-item">
                <%= link_to "Inscription", new_user_registration_path, class: "btn btn-flat" %>
              </li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>

    <!-- Flash messages avec style Le Wagon -->
    <% if notice %>
      <div class="flash flash-success alert alert-dismissible fade show" role="alert">
        <span><strong>SuccÃ¨s !</strong> ðŸŽ‰ <%= notice %></span>
        <a data-bs-dismiss="alert" aria-label="Close">
          <i class="fas fa-times"></i>
        </a>
      </div>
    <% end %>

    <% if alert %>
      <div class="flash flash-danger alert alert-dismissible fade show" role="alert">
        <span><strong>Erreur !</strong> ðŸ˜± <%= alert %></span>
        <a data-bs-dismiss="alert" aria-label="Close">
          <i class="fas fa-times"></i>
        </a>
      </div>
    <% end %>

    <!-- Contenu principal -->
    <div class="container mt-4">
      <%= yield %>
    </div>

    <!-- Footer Le Wagon -->
    <div class="footer mt-5">
      <div class="footer-links">
        <a href="#"><i class="fab fa-github"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
      </div>
      <div class="footer-copyright">
        EventHub - Plateforme d'Ã©vÃ©nements collaboratifs
      </div>
    </div>
  </body>
</html>
